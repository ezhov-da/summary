# Фундаментальный подход к программной архитектуре. Summary <a name="6f76259f"></a>

- [Фундаментальный подход к программной архитектуре. Summary](#6f76259f)
	- [Информация](#e172276d)
	- [Глава 1](#08e68ec2)
		- [Определение архитектуры программного обеспечения с.27](#60375654)
		- [Ожидания от работы архитектора с.31](#6d1d6ab7)
		- [Практика проектирования с.38](#ef02cef6)
		- [Законы архитектуры программного обеспечения с.45](#7bb20c13)
	- [Глава 2](#19dfbee0)
		- [Основные особенности архитектурного мышления с.48](#765747c7)
		- [Архитектура и проектирование с.49](#fe184c22)
		- [Широта технических взглядов с.51](#c74728c6)
		- [Анализ компромисов с.55](#0d5533f4)
	- [Глава 3](#182267a3)
		- [Модульность с.63](#c4fd2c3f)
		- [Измерение модульности с.67](#7d241812)
		- [Связность с.67](#c7ffecd9)
		- [Связанность с.71](#4644c505)
		- [Коннасценция с.76](#da559934)
			- [Статическая коннасценция](#5c8654ca)
			- [Динамическая коннасценция](#9adb99ce)
			- [Свойства коннасценции с.79](#6aa39912)
	- [Глава 4 ](#b7d6abc1)
		- [Основные свойства архитектуры с.84](#5679f400)
			- [Список (неполный) архитектурных свойств с.87](#f8328c49)
				- [Эксплуатационные свойства архитектуры с.88](#de33cbb9)
				- [Структурные свойства архитектуры с.88](#02ef86a7)
				- [Сквозные свойства архитектуры с.89](#8701425f)
			- [Перечень свойств ISO с.91](#8fd55168)
	- [Глава 5. Выбор архитектурных свойств с.96](#5b40c0a5)
	- [Глава 6. Измерение параметров архитектурных свойств и управление их соблюдением с.109](#f53f8d99)
	- [Глава 7. Область действия архитектурных свойств. с.123](#ee3641df)
	- [Глава 8. Компонентно-ориентированное мышление. с.133](#9d142efc)
		- [Разбиение архитектуры с.136](#c95647f7)
		- [Сравнение многоуровневого (техническое разбиение) и модульного (предметное разбиение) монолита](#0e82274f)
			- [Техническое разбиение](#9b3859a2)
			- [Предметное разбиение](#4e1278c5)
		- [Архитектурный квант. Выбор между монолитной и распределённой архитектурой. с.153](#1240a3d6)
	- [Глава 9. Архитектурные стили. Основы. с.156](#cc7dc6db)
		- [Базовые паттерны](#04f6adc5)
		- [Сравнение монолитной и распределённой архитектуры. с.161](#a1569da6)
		- [Заблуждения в сфере распределённых вычислений (Питер Дойч)](#6262b228)
		- [Проблемы и сложности, не встречающиеся у монолитных архитектур. с.169](#d64798d6)
	- [Глава 10. Многоуровневая архитектура. с.171](#e964230a)
		- [Топология](#0033bdb7)
		- [Уровни изоляции](#b00152f9)
		- [Добавление уровней](#8f032c45)
		- [Зачем выбирать этот стиль](#55db99e2)
		- [Оценка архитектурных свойств. с.179](#cf9ff854)
	- [Глава 11. Конвейерная архитектура. с.181](#8ab3090c)
		- [Топология](#6e729b9c)
		- [Оценки архитектурных свойств ](#b57dd825)
	- [Глава 12. Микроядерная архитектура. с188](#5453dc70)
		- [Ядро системы](#db4b9596)
		- [Подключаемые компоненты (плагины)](#8e508f6e)
		- [Оценки архитектурных свойств ](#74ff5190)
	- [Глава 13. Архитектура на основе сервисов. с.203](#36537295)
		- [Топология](#31afc222)
		- [Варианты топологии с.205](#c9aa08f1)
		- [Дизайн сервисов и гранулярность с.207](#604f715d)
		- [Разбиение базы данных с.210](#eed0f014)
		- [Пример архитектуры с.212](#b0845935)
		- [Оценки архитектурных свойств ](#4aeb7c44)
	- [Глава 14. Архитектура, управляемая событиями с.220](#858f95bf)
		- [Топология с.221](#82cec7f5)
		- [Топология брокера (хореография) с.221](#08a745fb)
			- [Достоинства и недостатки топологии брокера с.227](#7bcab7af)
		- [Топология медиатора (оркестратор) с.227](#604b0855)
			- [Достоинства и недостатки топологии медиатора с.237](#af7233ff)
		- [Выбор между моделью на основе запросов и моделью на основе событий с.250](#c3527a04)
			- [Компромиссы, присущие модели на основе событий с.250](#898a67f7)
		- [Оценки архитектурных свойств с.251](#79d46bfa)
	- [Глава 15. Архитектура на основе пространства с.255](#296c52b7)
		- [Топология с.256](#43969f6d)
			- [Блок обработки с.258](#9d98bb6d)
			- [Виртуализированное связующее программное обеспечение с.258](#480f4d3f)
			- [Средства переноса данных с.264](#d0b47095)
			- [Средства записи данных с.265](#9aa5d4f3)
			- [Средства чтения данных с.266](#e72feb74)
		- [Коллизии данных c.269](#78b9d56c)
			- [Примеры](#0e97179a)
		- [Реплицированное и распределённое кэширование c.273](#b35470a0)
			- [Реплицированное кэширование](#f0b738ca)
			- [Распределённое кэширование](#21dcbf95)
			- [Сравнение](#6d587d6b)
		- [Оценки архитектурных свойств с.279](#1fdc6c57)
	- [Глава 16. Оркестрированная сервис-ориентированная архитектура с.282](#d135eb3c)
		- [Таксономия с.284](#538f5afd)
			- [Бизнес сервисы](#4f1540aa)
			- [Корпоративные сервисы](#e5a7b0cf)
			- [Сервисы приложений](#e70eac45)
			- [Инфраструктурные сервисы](#7dac025b)
			- [Механизм оркестрации](#4f04c3ba)
		- [Оценки архитектурных свойств с.289](#8936c30c)
	- [Глава 17. Архитектура микросервисов с.292](#4378d43c)
		- [Распределённость](#5130e3a1)
		- [Ограниченный контекст](#14b257c4)
		- [Гранулярность](#0db6838c)
		- [Изолированность данных](#1f845785)
		- [API-уровень](#546bc49d)
		- [Транзакции и саги с.309](#999a8d71)
		- [Оценки архитектурных свойств с.311](#69210677)
	- [Сравнение архитектурных свойств](#e021b5ab)
	- [Глава 18. Выбор подходящего архитектурного стиля с.314](#cd7dbda7)
		- [Критерии принятия решения](#8d8718e7)
	- [Глава 19. Архитектурные решения с.328](#866ffcd4)
		- [Антипаттерны архитектурных решений с328](#920e258e)
			- [Covering Your Assets (излишняя перестраховка)](#401d1c8c)
			- [Groundhog Day (день сурка)](#d6cfb52d)
			- [Email-Driven Architecture (архитектура, управляемая имейлами)](#b446558c)
		- [Архитектурно значимые решения с.331](#5705042d)
		- [Запись архитектурных решений (ADR) с.332](#b8a5dc69)
			- [Базовая структура](#2959b006)
				- [Название](#56bea75c)
				- [Статус](#f45ef3c1)
				- [Контекст](#19f75ab5)
				- [Решение](#9efd9a51)
				- [Последствия](#4119fa6c)
				- [Комплаенс](#4039886c)
				- [Примечание](#a0c7431c)
	- [Глава 20. Анализ архитектурных рисков с.346](#ea45b6a6)
		- [Матрица рисков c.346](#49d0ac0b)
		- [Оценка рисков с.347](#0acd5af5)
		- [Проведение риск-штурма с.351](#acebb4af)
	- [Глава 21. Составление диаграмм и проведение презентаций архитектуры с.367](#9848c0b7)
		- [Стандарты составления диаграмм](#c73b1f18)
		- [Рекомендации по составлению диаграмм с.372](#d3479975)
	- [Глава 22. Эффективная команда с.380](#c8a60de6)
		- [Рамки, устанавливаемые для команд](#88245d50)
		- [Личные качества архитекторов с.381](#1fe7bd81)
		- [Насколько жёстким должен быть контроль?](#4dd7f9b3)
		- [Тревожные признаки в работе команды с.391](#21fa9f10)
		- [Чек-листы](#902fc5e4)
		- [Категории сторонней библиотеки с.402](#e7059d8e)
	- [Глава 23. Навыки лидерства и ведения переговоров с.404](#03aa1b8d)
		- [Ведение переговоров с бизнес партнёрами с.405](#8fa81edc)
			- [Девятки доступности с.406](#231db626)
		- [Переговоры с другими архитекторами с.407](#943f6558)
		- [Переговоры с разработчиками c.409](#66619c75)
		- [Архитектор ПО в роли лидера](#adf01ae3)
			- [Четыре "С" архитектуры с.411](#e5911376)
			- [Будьте прагматичны, но дальновидны с.413](#21d7da02)
			- [Лидерство на основе личного примера](#c65512b6)
		- [Взаимодействие с командой разработчиков](#e7b24ff5)
	- [Глава 24. Карьерный путь с.424](#bcc45ce7)
		- [Правило 20 минут](#b8213328)
		- [Разработка персонального радара](#3d3390c4)
		- [Напутствия](#df4181c4)

## Информация <a name="e172276d"></a>

В случае нарушения авторских прав, просьба <a href="mailto:ezhdenis@yandex.ru">связаться</a>. 

<table>
  <tr>
    <td>Название</td>
    <td>Фундаментальный подход к программной архитектуре: паттерны, свойства, проверенные методы</td>
  </tr>
  <tr>
    <td>Авторы</td>
    <td>М. Ричардс, Н. Форд</td>
  </tr>
  <tr>
    <td>Ссылка на книгу</td>
    <td>https://www.piter.com/product/fundamentalnyy-podhod-k-programmnoy-arhitekture-patterny-svoystva-proverennye-metody</td>
  </tr>
</table>

## Глава 1 <a name="08e68ec2"></a>

### Определение архитектуры программного обеспечения с.27 <a name="60375654"></a>

Архитектура состоит из:
- Структура системы
- Свойства архитектуры
- Архитектурные решения
- Принципы проектирования

### Ожидания от работы архитектора с.31 <a name="6d1d6ab7"></a>

- Принятие архитектурных решений
- Постоянный анализ архитектуры
- Своевременное следование последним тенденциям
- Контроль за выполнением принятых решений
- Обладание обширными знаниями и опытом
- Компетентность в нужной области бизнеса
- Владение навыками межличностного общения
- Чёткое понимание политики компании


### Практика проектирования с.38 <a name="ef02cef6"></a>

Неизвестные неизвестности - это злейший враг программных систем.

### Законы архитектуры программного обеспечения с.45 <a name="7bb20c13"></a>

- Первый закон архитектуры программного обеспечения
    > Всё в архитектуре программного обеспечения соткано из компромиссов.

- Следствие 1
    > Если архитектор полагает, что обнаружил нечто бескомпромиссное, то скорее всего, компромисс ещё просто _не выявлен_.

- Второй закон архитектуры программного обеспечения
    > _Почему_ важнее, чем _как_

## Глава 2 <a name="19dfbee0"></a>

### Основные особенности архитектурного мышления с.48 <a name="765747c7"></a>
- Понимание разницы между архитектурой и проектированием, умение сотрудничать с командами разработчиков
- Широкий спектр технических знаний при сохранении достаточного уровня (глубины) технической компетенции
- Осознание, анализ и выдерживание баланса компромиссов при принятии различных решений и выборе технологий
- Понимание важности бизнес-факторов и того, как они влияют на решение архитектурных задач

### Архитектура и проектирование с.49 <a name="fe184c22"></a>

Сотрудничество архитектора и команды разработчиков является залогом успеха любого программного проекта.

### Широта технических взглядов с.51 <a name="c74728c6"></a>

Разработчик - техническая глубина, архитектор - техническая широта.

Архитекторам следует сосредоточиться на технической широте.

```
                                       Техническая широта
         |<_______________________________________________________________>|
         |                                                                 |
      ___|_____________|________________________________________
         | Техническая |        /                               \
         |  глубина    |       /         Известные вещи          \
      ___|_____________|______/___________________________________\
         |                   /                                     \
         |                  /        Вещи, о которых мы знаем,      \
         |                 / что не знаем их (известные неизвестные) \
      ___|________________/___________________________________________\ 
                         /                                             \
                        /        Вещи, о которых мы не знаем,           \
                       /    что не знаем их (неизвестные неизвестные)    \
                      /___________________________________________________\
```

### Анализ компромисов с.55 <a name="0d5533f4"></a>

Мыслить как архитектор - это значит видеть компромиссы в каждом решении, как технического, так и любого другого плана, и анализировать эти компромиссы, чтобы выбрать лучшее.

> Архитектура - это то, что невозможно загуглить.

> В архитектуре нет верных или неверных ответов, есть только компромиссы.

> Программисты знают о преимуществах чего угодно, но не разбираются ни в каких компромиссах. Архитекторам нужно понимать и то и другое.

**Компромиссы между топиками и очередями**:

|Преимущества топика|Недостатки топика|
|---|---|
|Архитектурная расширяемость|Проблемы с доступом к данным и их безопасностью|
|Отсутствие связанности сервисов|Нет разнородных контрактов|
||Нет отслеживания и программной масштабируемости|

## Глава 3 <a name="182267a3"></a>

### Модульность с.63 <a name="c4fd2c3f"></a>

Программное обеспечение моделирует сложные системы, склонные к энтропии (беспорядку).

### Измерение модульности с.67 <a name="7d241812"></a>

Основные концепции:
- Связность
- Связанность
- Коннасценции

### Связность с.67 <a name="c7ffecd9"></a>

Связность говорит о том, содержатся ли все взаимосвязанные элементы внутри одного модуля.

Уровни связности (от наиболее сильной до наиболее слабой):
- Функциональная связность (все части взаимосвязаны)
- Последовательная связность (выходные данные одного становятся входными данными другого)
- Коммуникационная связность (цепочка для действий над информацией)
- Процедурная связность (определённый порядок выполнения)
- Временная связность (на основе временных зависимостей, например инициализация при запуске программы)
- Логическая связность (данные связаны не функционально, а логически)
- Случайная связность (ничем не связаны, кроме расположения в одном файле)

### Связанность с.71 <a name="4644c505"></a>

Афферентная связанность - измеряется количеством _входящих_ соединений с элементом кода.

Эфферентная связанность - измеряется количеством _исходящих_ соединений с другими фрагментами кода.

### Коннасценция с.76 <a name="da559934"></a>

> Два компонента считаются коннасцентными, если изменения, внесённые в один из них, потребуют модификации другого для поддержания общей работоспособности системы.
> _Мейлир Пейдж-Джонс_

Два типа коннасценции:
- Статическая
- Динамическая

#### Статическая коннасценция <a name="5c8654ca"></a>

Связанность на уровне кода.

- Коннасценция имени
- Коннасценция типа
- Коннасценция смысла или коннасценция соглашения
- Коннасценция позиции
- Коннасценция алгоритма


#### Динамическая коннасценция <a name="9adb99ce"></a>

Связанность на уровне времени выполнения.

- Коннасценция исполнения
- Коннасценция синхронности
- Коннасценция значений
- Коннасценция идентичности

#### Свойства коннасценции с.79 <a name="6aa39912"></a>

- Сила 
- Локальность
- Степень
    > Рекомендация Пейдж-Джонс для работы с коннасценцией для улучшения модульности системы:
    > 1. Свести общую коннасценцию к минимум за счёт разбиения системы на инкапсулированные элементы.
    > 1. Минимизировать любую остающуюся коннасценцию, пересекающую границы инкапсуляции.
    > 1. Довести до максимума коннасценцию внутри границ инкапсуляции.

Два полезных совета от Джима Вейриха:

**Правило степени**: сильные формы коннасценции следует переделывать в слабые

**Правило локальности**: по мере увеличения расстояния между элементами программы следует использовать всё более слабые формы коннасценции.

## Глава 4  <a name="b7d6abc1"></a>

### Основные свойства архитектуры с.84 <a name="5679f400"></a>

Свойства архитектуры должны отвечать трём критериям:
- определять взгляд на проектирование, не относящийся к предметной области (непредметный взгляд);
- влиять на ряд структурных аспектов проектирования;
- играть решающую или весьма важную роль в успехе приложения.

#### Список (неполный) архитектурных свойств с.87 <a name="f8328c49"></a>

##### Эксплуатационные свойства архитектуры с.88 <a name="de33cbb9"></a>

- Доступность
- Бесперебойность
- Производительность
- Восстанавливаемость
- Надёжность и безотказность
- Робастность
- Масштабируемость

##### Структурные свойства архитектуры с.88 <a name="02ef86a7"></a>

- Конфигурируемость
- Расширяемость
- Инсталлируемость
- Возможность многократного использования
- Локализуемость
- Сопровождаемость
- Переносимость
- Поддерживаемость
- Обновляемость

##### Сквозные свойства архитектуры с.89 <a name="8701425f"></a>

- Доступность
- Архивируемость
- Аутентифицируемость
- Авторизуемость
- Правомерность
- Конфиденциальность
- Безопасность
- Поддерживаемость
- Удобство и простота использования

#### Перечень свойств ISO с.91 <a name="8fd55168"></a>

- Производительность
- Совместимость
- Удобство и простота использования
- Надёжность
- Безопасность
- Сопровождаемость
- Переносимость
- Функциональная пригодность
    
    Составляющие:
      
      - Функциональная законченность
      - Функциональная корректность
      - Функциональная целесообразность

> Архитектору не нужно проектировать систему, где каждое архитектурное свойство максимально выражено. Чаще всего решения сводятся к нахождению компромиссов.

> Всегда стремитесь не к лучшей, а к наименее худшей архитектуре. с.95

## Глава 5. Выбор архитектурных свойств с.96 <a name="5b40c0a5"></a>

Три пути для для выявления архитектурных свойств с.97:
1. На основе задач предметной области
2. На основе требований
3. На основе неявных особенностей предметной области

> В архитектуре нет неправильных ответов, есть только стоящие больших затрат.

## Глава 6. Измерение параметров архитектурных свойств и управление их соблюдением с.109 <a name="f53f8d99"></a>

> _Управление_ архитектурными свойствами является важной обязанностью архитектора. с.115

> Архитектурная функция пригодности - любой механизм, предоставляющий объективную оценку целостности какого-либо архитектурного свойства или сочетания архитектурных свойств. с.116

> Прежде чем навязывать разработчикам функцию пригодности, архитекторы должны убедиться, что разработчики понимают, в чём заглючается её цель. с.119

Интересный принцип - "Лучше попросить прощения, чем вымаливать разрешения". с.120

## Глава 7. Область действия архитектурных свойств. с.123 <a name="ee3641df"></a>

## Глава 8. Компонентно-ориентированное мышление. с.133 <a name="9d142efc"></a>

> Если архитекторы не позволяют никому другому самостоятельно принимать решения, организации в дальнейшем придётся бороться со слишком широкими правами и обязанностями следующего поколения архитекторов.

### Разбиение архитектуры с.136 <a name="c95647f7"></a>

### Сравнение многоуровневого (техническое разбиение) и модульного (предметное разбиение) монолита <a name="0e82274f"></a>

#### Техническое разбиение <a name="9b3859a2"></a>

Достоинства:
- Настроечный код чётко разделён
- Больше подходит для паттерна многоуровневой архитектуры

Недостатки:
- Более высокий уровен глобальной связанности.
- Разработчики могут стокнуться с необходимостью повторять код решения предметных задач.
- Как правило на уровне данных возникает более высокий уровень связанности.

#### Предметное разбиение <a name="4e1278c5"></a>

Достоинства:
- Моделирование больше ориентированно на бизнес-процессы, а не на особенности реализации.
- Упрощает использование обратного закона Конвея для формирования кросс-функциональных команд вокруг задач предметной области. 
- Больше подходит для архитектурных стилей модульного монолита и микросервисов.
- Упрощает миграцию данных и компонентов в в распределённые архитектуры.

Недостатки:
- Настроечный код имеется сразу в нескольких местах.

Недостатоки:

### Архитектурный квант. Выбор между монолитной и распределённой архитектурой. с.153 <a name="1240a3d6"></a>

> Архитектурный квант ограничивает область действия архитектурных свойств.

**Монолитная** архитектура - единый развёртываемый модуль, подключенный, как правило, к единой базе данных и включающей все функциональные возможности системы.

**Распределённая** архитектура (полная противоположность _монолитной_) - приложение состоит из нескольких сервисов, запущенных в собсвенных экосистемах и обменивающихся данными через сетевые протоколы. 

## Глава 9. Архитектурные стили. Основы. с.156 <a name="cc7dc6db"></a>

**Архитектурный стиль** - всеобъемлющая структура организации исходного кода пользовательского интерфейса и бэкенда, а так же взаимодействия этого кода с хранилищем данных.

**Архитектурный паттерн** - низкоуровневая структура проектирования, помогающая сформировать конкретные решения в рамках архитектурного стиля.

### Базовые паттерны <a name="04f6adc5"></a>

- Большой ком грязи - отсутствие какой-либо чётко распознаваемой архитектурной структуры
- Цельная архитектура 
- Клиент-сервер
  - Стационарный компьютер + сервер базы данных
  - Браузер + веб-сервер
  - Трехуровневые системы

### Сравнение монолитной и распределённой архитектуры. с.161 <a name="a1569da6"></a>

Два основных типа архитектурных стилей:
- Монолитные (с единым развёртываемым блоком для всего кода)
- Распределённые (с несколькими развертываемыми блоками, подключаемыми друг к другу по протоколам удалённого доступа)


Рассматриваемые архитектурные стили:
- Монолитные
  - многоуровневая архитектура
  - конвейерная архитектра
  - микроядерная архитектура
- Распределённые
  - архитектура на основе сервисов
  - архитектура, управляемая событиями
  - архитектура на основе пространства
  - сервис-ориентированная архитектура
  - архитектура микросервисов

### Заблуждения в сфере распределённых вычислений (Питер Дойч) <a name="6262b228"></a>

1. Надёжность сети
2. Нулевая задержка
3. Пропускная способность ничем не ограничена
4. Сеть безопасна
5. Топология никогда не меняется
6. Сетью всегда занимается только один администратор
7. Передача данных ничего не стоит
8. Сеть однородна
   

### Проблемы и сложности, не встречающиеся у монолитных архитектур. с.169 <a name="d64798d6"></a>

- Распределённое журналирование
- Распределённые транзакции
- Сопровождение контрактов и управление их версиями

## Глава 10. Многоуровневая архитектура. с.171 <a name="e964230a"></a>

### Топология <a name="0033bdb7"></a>

Компоненты собраны в логические горизонтальные уровни, каждый из которых выполняет в приложении вполне определённую роль.

Большинство таких архитектур состоят из 4-х стандартных уровней:
- представление
- бизнес-логика
- сохранение информации
- база данных

Архитектура относится к архитектурам, разбиваемым по _техническому принципу_ (в отличие от _предметного разбиения_).
Компоненты объединяются в группы не по предметным областям, а по своей технической роли. В результате любая конкретная бизнес-область пронизывает все уровни архитектуры.

**! В данной архитектуре не работает предметно-ориентированное проектирование.**

### Уровни изоляции <a name="b00152f9"></a>

Каждый уровень может быть _закрытым_ или _открытым_.

- Закрытый - при движении сверху вниз запрос **не** может пропустить ни один уровень.
- Открытый - при движении сверху вниз запрос может пропустить ни один уровень.

### Добавление уровней <a name="8f032c45"></a>

Использование концепции открытых и закрытых уровней помогает определить взаимосвязь между архитектурными уровнями и потоками запросов.

### Зачем выбирать этот стиль <a name="55db99e2"></a>

Этот стиль вполне подходит для небольших приложений или веб-сайтов. Так же является удачным выбором, особенно в качестве отправной точки, в условиях весьма жёсткого бюджета и лимитированного времени.

### Оценка архитектурных свойств. с.179 <a name="cf9ff854"></a>

![Многоуровневая архитектура][oas_mnogourovnevaya_arhitektura]

## Глава 11. Конвейерная архитектура. с.181 <a name="8ab3090c"></a>

Конвейерная архитектура известна так же как архитектура _каналов_ и _фильтров_.

### Топология <a name="6e729b9c"></a>

Тополгия состоит из каналов и фильтров.

Каналы формируют одностороннюю связь между фтльтрами по принципу точка-точка.

Канал - архитектурная форма линии связи между фильтрами.

Фильтр характеризуется автономностью, независимостью от других фильтров и, как правило, отсутствием состояния.

Четыре типа фильтров:
1. Производитель _producer_ (иногда называется источником)
2. Преобразователь _transformer_
3. Тестер _tester_
4. Потребитель _consumer_

### Оценки архитектурных свойств  <a name="b57dd825"></a>

![Конвейерная архитектура][oas_konvejernaya_arhitektura]

## Глава 12. Микроядерная архитектура. с188 <a name="5453dc70"></a>

Микроядерный аръитектурный стиль известен так же как архитектура плагинов.

Микроядерный архитектурный стиль состоит из двух архитектурных компонентов:
1. Основная система (ядро)
2. Подключаемые компоненты (плагины)

### Ядро системы <a name="db4b9596"></a>

Ядро системы - минимальная функциональность, необходимая для работы системы.

В зависимости от размера и сложности ядро может быть реализовано в виде многоуровневой архитектуры или в виде модульного монолита.

### Подключаемые компоненты (плагины) <a name="8e508f6e"></a>

Подключаемые компоненты оьбладают автономностью и независимостью и содержат функции специализированной обработки, дополнительные средства и настраиваемый код. предназначенный для улучшения и расширения ядра.

### Оценки архитектурных свойств  <a name="74ff5190"></a>

![Микроядерная архитектура][oas_mikroyadernaya_arhitektura]

## Глава 13. Архитектура на основе сервисов. с.203 <a name="36537295"></a>

Архитектура _на основе сервисов_ (service-based) вариант архитектуры микросервисов и считается одной из наиболее прагматичных, главным образом из-за своей гибкости. Данная архитектура является распределённой, но при этом нет такого же уровня сложности и затраности, как, например, у микросервисов или архитектур, управляемых событиями.

### Топология <a name="31afc222"></a>

Распределённая макроуровневая структура, состоящая из отдельно развёрнутого пользовательского интерфейса,отдельно развёрнутых удалённых крупномодульных сервисов и монолитной базы данных.

![Топология](https://www.plantuml.com/plantuml/svg/hP8nJiCm58PtdyBgtg7Fdb4bZX5b24gs9a4qdH0IGJ31WiJ0XhX1XAYQWi8P_dSZR0YBhQ8OFCM9_-_JhvUtN3VPMRCfLwAgyqBEy8Y1hx3bIxx65djkP_9SI7FnX0-yynrsvlc2peRiExTuGu-zHE-HuaByQ9_jXU5wRkNYMvaiv75TdjPLKJLoaRfVA3s0quYJXzCKN8suyd0r1TSZhZrSUtYUDTb9jhQAUpoCe3bssA6JU3M70GFVyirNFFd3Z5Cvdn-veunbelHVfIXQAOfNIaKhfUALqj5AQQUKS5R3fWxkeFFpVysAX0B4529M0M8L8jO1OZrTl2ogV5EkFW40)

Сервисы - независимые и отдельно развёртываемые крупномодульные "порции приложения", которые обычно называются _сервисами предметной области (dimain services)_.

**Один из наиболее важных аспектов архитектуры - использование централизованной общей базы данных.**

### Варианты топологии с.205 <a name="c9aa08f1"></a>

### Дизайн сервисов и гранулярность с.207 <a name="604f715d"></a>

### Разбиение базы данных с.210 <a name="eed0f014"></a>

Практика создания единой общей бибилиотеки объектов сущностей - самый неэффективный способ реализации архитектуры на основе сервисов.

Любое изменение в структурах таблиц БД приведёт к изменениям в единой общей бибилиотеке.

Один из способов уменьшения влияния и снижения риска от изменений, вносимых в БД - логическое разбиение базы данных с помощью интегрированных общих библиотек.

### Пример архитектуры с.212 <a name="b0845935"></a>

Архитектура на основе сервисов относится к тем, которые разбиваются по _предметному признаку_, то есть структура формируется по предметным областям, а не из технических соображений.

### Оценки архитектурных свойств  <a name="4aeb7c44"></a>

![Архитектура на основе сервисов][oas_arhitektura_na_osnove_servisov]



## Глава 14. Архитектура, управляемая событиями с.220 <a name="858f95bf"></a>

### Топология с.221 <a name="82cec7f5"></a>

Используется 2 осноные топологии:
- брокера (используется там, где требуется быстрая реакция и динамический контроль над обработкой событий)
- медиатора (используется там, где требуется контроль над рабочим процессом событий)

### Топология брокера (хореография) с.221 <a name="08a745fb"></a>

В топологии брокера нет центрального медиатора событий. Поток сообщений распределяется по компонентам обработчиков событий в виде цепочки сообщений, проходящий через небольшой почтовый агент.

Применяется при наличии относительно простой обработки событий и отсутствии необходимости в в централизованной оркестровки и координации.

Четыре основных архитектрных компонента:
- инициирующее событие (initiating event). Исходное событие, запускающее весь поток операций.
- брокер событий (event broker). 
- обработчик событий (event processor)
- событие обработки (processing event)


#### Достоинства и недостатки топологии брокера с.227 <a name="7bcab7af"></a>

| Достоинства                   | Недостатки                                    |
|-------------------------------|-----------------------------------------------|
| Обработчики событий разделены | Отсутствие контроля над рабочим процессом     |
| Высокая масштабируемость      | Проблема обработки ошибок                     |
| Высокая отзывчивость          | Отсутствие возможности восстановления         |
| Высокая производительность    | Невозможность перезапуска                     |
| Высокая отказоустойчивость    | Угроза возникновения несогласованности данных |

### Топология медиатора (оркестратор) с.227 <a name="604b0855"></a>

Медиатор событий - центральное место, управляет процессом и контролирует весь процесс обработки инициирующих событий, требующих согласованной работы нескольких обработчиков.

Архитектурные компоненты:
- инициирующее событие
- очередь событий
- медиатор событий
- каналы событий
- обработчики событий

Редко все события относятся к одному классу сложности. Рекомендуется классфифицировать события как:
- простые
- сложные
- комплексные

и всегда проводить каждое событие через медиатор простых событий.

Компонент-медиатор управляет рабочим процессом, чего нет в топологии брокера.

В топологии брокера события обработки публикуются как события, произошедшие в системе.
В топологии медиатора события обработки являются командами (тем, что должно произойти) в отличие от событий (что уже произошло).

В топологии медиатора событие обработки должно быть обязательно обработано (команда), а в топологии брокера может быть проигнорировано (реакция).

#### Достоинства и недостатки топологии медиатора с.237 <a name="af7233ff"></a>

| Достоинства                               | Недостатки                                       |
|-------------------------------------------|--------------------------------------------------|
| Контроль над рабочим процессом            | Более сильная связанность обработчиков событий   |
| Возможность обработки ошибок              | Низкая масштабируемость                          |
| Восстанавливаемость                       | Низкая производительность                        |
| Возможность перезапуска                   | Низкая отказоустойчивость                        |
| Более простая организация согласованности | Проблема моделирования сложных рабочих процессов |

### Выбор между моделью на основе запросов и моделью на основе событий с.250 <a name="c3527a04"></a>

#### Компромиссы, присущие модели на основе событий с.250 <a name="898a67f7"></a>

| Преимущества перед моделью на основе запросов                  | Компромиссы                                                 |
|----------------------------------------------------------------|-------------------------------------------------------------|
| Более быстрая реакция на динамический пользовательский контент | Поддержка только окончательной согласованности              |
| Лучшая масштабируемость и приспособляемость                    | Менее жёсткий контроль над процессом обработки              |
| Лучшая гибкость и управление изменениями                       | Меньшая определённость в отношении исходного потока событий |
| Лучшая адаптируемость и расширяемость                          | Трудности тестирования и отладки                            |
| Лучшая отзывчивость и производительность                       |                                                             |
| Лучшая приспособленность к принятию решений в реальном времени |                                                             |
| Лучшая реакция на ситуационную осведомлённость                 |                                                             |

### Оценки архитектурных свойств с.251 <a name="79d46bfa"></a>

![Архитектура, управляемая событиями][oas_arhitektura_upravlyaemaya_sobytiyami]

## Глава 15. Архитектура на основе пространства с.255 <a name="296c52b7"></a>

Стиль архитектур на _основе пространства_ (space-based architecture) разработан специально для решения проблем, связанных с высокой масштабируемостью,адаптируемостью и высоким уровнем параллелизма.

### Топология с.256 <a name="43969f6d"></a>

Архитектура получила свой название от концепции _пространства кортежей_, технологии использования нескольких параллельных процессоров, взаимодействующих через общую память.

Компоненты:
- Блок обработки
- Виртуализированное связующее программное обеспечение
- Средства переноса данных
- Средства записи данных
- Средства чтения данных

#### Блок обработки с.258 <a name="9d98bb6d"></a>

Содержит логику приложения.

#### Виртуализированное связующее программное обеспечение с.258 <a name="480f4d3f"></a>

Решает в архитектуре проблемы инфраструктуры, связанные с синхронизацией данных и обработкой запросов.

Состав ПО:
- Сетка обмена сообщениями (управление входным запросом и состоянием сессии)
- Сетка данных (самый важный и решающий компонент. Создаётся в виде реплицируемого кэша)
- Сетка обработки (управление согласованной обработкой запросов)
- Диспетчер развёртывания (управление динамическим запуском и завершением работы экземпляров блока обработки в зависимости от условий нагрузки)

#### Средства переноса данных с.264 <a name="d0b47095"></a>

Позволяет отправлять данные другому обработчику, который затем обновляет информацию в БД.
Обычно реализуются с помощью обмена сообщениями.

#### Средства записи данных с.265 <a name="9aa5d4f3"></a>

Обновляет базу данных информацией из сообщения от средства переноса данных.

#### Средства чтения данных с.266 <a name="e72feb74"></a>

Отвечают за за считывание информации из БД и её отправку в блоки обработки с помощью средства обратного переноса данных.

Средства чтения вызываются только в одной из трёх ситуаций:
- при сбое всех экземпляров блоков обработки с одним и тем же именованным кэшем
- при повторном развёртывании всех блоков обработки с одним и тем же именованным кэшем
- при получении архивных данных, не содержащихся в реплицированном кэше

### Коллизии данных c.269 <a name="78b9d56c"></a>

Формула для вероятностного определния числа потенциальных коллизий данных на основе факторов:

```
CollisionRate = N * (UR'в квадрате'/S) * RL

N - количество экземпляров сервисов, использующих кэши с одинаковыми именам
UR - частота обновлений в миллисекундах (возведённая в квадрат)
S - размер кэша (количество строк)
RL - задержка репликации кэширования
```

#### Примеры <a name="0e97179a"></a>

| Частота обновлений (UR)    | 20 обновлений в секунду |
|----------------------------|-------------------------|
| Количество экземпляров (N) | 5                       |
| Размер кэша (S)            | 50 000 строк            |
| Задержка репликации (RL)   | 100 мс                  |
| Обновления                 | 72 000 в час            |
| Частота коллизий           | 14,4 в час              |
| Процентный показатель      | 0,02%                   |

| Частота обновлений (UR)    | 20 обновлений в секунду |
|----------------------------|-------------------------|
| Количество экземпляров (N) | 5                       |
| Размер кэша (S)            | 50 000 строк            |
| Задержка репликации (RL)   | 1 мс                    |
| Обновления                 | 72 000 в час            |
| Частота коллизий           | 0,1 в час               |
| Процентный показатель      | 0,0002%                 |

| Частота обновлений (UR)    | 20 обновлений в секунду |
|----------------------------|-------------------------|
| Количество экземпляров (N) | 2                       |
| Размер кэша (S)            | 50 000 строк            |
| Задержка репликации (RL)   | 100 мс                  |
| Обновления                 | 72 000 в час            |
| Частота коллизий           | 5,8 в час               |
| Процентный показатель      | 0,008%                  |

| Частота обновлений (UR)    | 20 обновлений в секунду |
|----------------------------|-------------------------|
| Количество экземпляров (N) | 2                       |
| Размер кэша (S)            | 50 000 строк            |
| Задержка репликации (RL)   | 100 мс                  |
| Обновления                 | 72 000 в час            |
| Частота коллизий           | 72,0 в час              |
| Процентный показатель      | 0,1%                    |
 
На коллизии влияют:
1. Задержка репликации
2. Количество экземпляров
3. Размер кэша

### Реплицированное и распределённое кэширование c.273 <a name="b35470a0"></a>

#### Реплицированное кэширование <a name="f0b738ca"></a>

Каждый блок обработки содержит собственную сетку данных в памяти, которая синхронизируетсямежду всеми блоками обработки, используя кэш с одним и тем же именем.

Реплицированное кэширование не только быстрое, но и отказоустойчивое.

#### Распределённое кэширование <a name="21dcbf95"></a>

Для распеределённого кэширования требуется внешний сервер или сервис, предназначенный для хранения централизованного кэша.

Лучшая согласованность данных

#### Сравнение <a name="6d587d6b"></a>

| Критерии принятия решения | Реплицированный кэш    | Распределённый кэш |
|---------------------------|------------------------|--------------------|
| Оптимизация               | Производительность     | Согласованность    |
| Размер кэша               | Небольшой (<100 МБ)    | Большой (>500 МБ)  |
| Тип данных                | Относительно статичный | Высокодинамичный   |
| Частота обновлений        | Относительно низкая    | Высокая            |
| Отказоустойчивость        | Высокая                | Низкая             |

### Оценки архитектурных свойств с.279 <a name="1fdc6c57"></a>

![Архитектура на основе пространства][oas_arhitektura_na_osnove_prostranstva]

## Глава 16. Оркестрированная сервис-ориентированная архитектура с.282 <a name="d135eb3c"></a>

### Таксономия с.284 <a name="538f5afd"></a>

Основная идея - многократное использование ресурсов на уровне предприятия.

#### Бизнес сервисы <a name="4f1540aa"></a>

Помещены на вершине данной архитектуры - точки входа.

#### Корпоративные сервисы <a name="e5a7b0cf"></a>

Содержат узкоспециализированные совместо используемые реализации.

#### Сервисы приложений <a name="e70eac45"></a>

Одноразовые, имеют собственную однократную реализацию.

#### Инфраструктурные сервисы <a name="7dac025b"></a>

Обеспечивают решения экплуатационных задач: мониторнг, ведение журнала, проведения аутентификации и авторизации.

#### Механизм оркестрации <a name="4f04c3ba"></a>

Центральная часть аритектуры. Соединяет вместе реализации бизнес-сервисов и выполняет такие функции, как координация транзакций и преобразование сообщений.

### Оценки архитектурных свойств с.289 <a name="8936c30c"></a>

![Оркестрированная сервис-ориентированная архитектурараспределённая][oas_orkestrirovannaya_servis_orientirovannaya_arhitektura]

## Глава 17. Архитектура микросервисов с.292 <a name="4378d43c"></a>

Каждый сервис включает всё необходимое для независимой работы: базы данных и другие зависимые компоненты.

### Распределённость <a name="5130e3a1"></a>

Микросервисы формируют _распределённую архитектуру_: каждый сервис запускается в своём собственном процессе.

Не рекомендуется использовать транзакции, пересекающие границы сервисов.

### Ограниченный контекст <a name="14b257c4"></a>

В основе философии микросервисов лежит понятие _ограниченного контекста_: в каждом сервисе моделируется предметная область или рабочий процесс.

### Гранулярность <a name="0db6838c"></a>

Многие разработчики понятие "микросервисы" воспринимают не как описание, а как указание создавать слишеом мелкие сервисы.

Границы сервиса в микросервисах предназначениы для охвата предметной области или рабочего процесса.

Рекомендации для поиска границ:
- Назначение (определение границ предметной областью)
- Транзакции
- Хореография

Обеспечение приемлемого дизайна - интеративное приближение к идеалу.

### Изолированность данных <a name="1f845785"></a>

В системе с высокой степенью разделённости команды пользуются возможностью выбирать наиболее подходящую базу данных (или другую зависимость), не влияя на работу других команд, которым не разрешено вникать в подробности реализации.

### API-уровень <a name="546bc49d"></a>

Обычно медиаторы используются в архитектурах, разбиваемых по техническому принципу, а в микросервисах всегда только предметное разбиение.

### Транзакции и саги с.309 <a name="999a8d71"></a>

> Не используйте транзакции в микросервисах, лучше скорректируйте гранулярности!

> Порой без небольшого числа транзакций между сервисами просто не обойтись. Но если они становтся доминантной архитектурой, значит, с ней что-то не в порядке.

### Оценки архитектурных свойств с.311 <a name="69210677"></a>

![Архитектура микросервисов][oas_arhitektura_mikroservisov]

## Сравнение архитектурных свойств <a name="e021b5ab"></a>

![Сравнение архитектурных свойств][oas_compare]

## Глава 18. Выбор подходящего архитектурного стиля с.314 <a name="cd7dbda7"></a>

Всё зависит от конкретных обстоятельст!

Выбор архитектурного стиля основывается на:
- Результате анализа и размышлениях о компроимссах
- Специфика предметной области
- Стратегические цели
- Множество других вещеё :)

### Критерии принятия решения <a name="8d8718e7"></a>

Принятие решения на осное анализа следующих факторов:

- Предметная область
- Архитектурные свойства, влияющие на структуру
- Архитектура данных
- Организационные факторы
- Процессы разработки, команды разработчиков и особенности эксплуатации
- Предметно-архитектурный изоморфизм
- Монолит или распределённая архитектура?
- Где должны находиться данные?
- Каков будет стиль обмена даннымимежду сервисами: синхронным или асинхронным?
  > По умолчанию используйте синхронный режим, а на асинхронный переходите по мере необходимости.

## Глава 19. Архитектурные решения с.328 <a name="866ffcd4"></a>

Принятие архитектурных решений включает в себя:
- сбор достаточного объёма информации для обоснования решения
- документирование решения
- умение убедить всех стейкхолдеров в его правильности

### Антипаттерны архитектурных решений с328 <a name="920e258e"></a>

#### Covering Your Assets (излишняя перестраховка) <a name="401d1c8c"></a>

Архитектор избегает или откладывает приняте архитектурного решения из-за страха сделать неправильный выбор.

Как избежать:
1. Для принятия важного архитектурного решения можно дождаться _последнего ответственного момента_. Момент наступает, когда накоплено достаточно информации для обоснования и проверки вашего решения.
2. Постоянно сотрудничать с командами разработки, чтоб убедиться, что решение будет реализовано так, как и предполагалось. Архитектор не может знать все особенности конкретной технологии и все связанные с ней вопросы.

#### Groundhog Day (день сурка) <a name="d6cfb52d"></a>

Возникает, когда люди не понимают причин принятия решения и продолжают обсуждать его снова и снова. Антипаттерн складывается из того, что архитектор не может убедительно обосновать своё решение (или весь проект).

Наличие ценных бизнес-аргументов в обосновании крайне важно для любого архитектурного решения.

Четыре наиболее распространённых бизнес обоснования:
1. Стоимость
2. Время вывода на рынок
3. Удовлетворённолсть пользователей
4. Стратегическое позиционирование

#### Email-Driven Architecture (архитектура, управляемая имейлами) <a name="b446558c"></a>

Возникает, когда люди не понимают сути принятого решения, забывают о нём или даже не знают о том, что оно было принято, и поэтому не в состоянии его реализовать. Этот антипаттерн об эффективном доведении ваших архитектурных решений до исполнителей.

Первое правило: не включать архитектурное решение в тело электронного письма.

Второе правило: уведомлять только тех людей, которые действительно заинтересованы в архитектурном решении.

### Архитектурно значимые решения с.331 <a name="5705042d"></a>

К _архитектурно значимым решениям_ относятся решения, влияющие на:
- структуру
- нефункциональные свойства
- зависимости
- интерфейс
- технологические методы разработки

### Запись архитектурных решений (ADR) с.332 <a name="b8a5dc69"></a>

#### Базовая структура <a name="2959b006"></a>

Пять главных разделов:
- Название (Title)
- Статус (Status)
- Контекст (Context)
- Решение (Decision)
- Последствия (Consequences)
- Соблюдение требований или Комплаенс (Compliance) (доп)
- Примечание (Notes) (доп)

Эта структура может быть расширена.

##### Название <a name="56bea75c"></a>

Имеет последовательную нумерацию и содержит краткую фразу, дающую описание архитектурных решений.
Должно быть достаточно информативным для устранения любой неясности относительно сути и контекста решения и в то же время кратким и понятным.

Пример:
> 42. Использование асинхронного обмена сообщениями между сервисами Order и Payment.

##### Статус <a name="f45ef3c1"></a>

Пометки: _Предложено_, _Принято_, _Заменено_

##### Контекст <a name="19f75ab5"></a>

Указываются обстоятельства, в силу которых принималось решение. Иными словами, "что именно заставило меня принять такое решение?".

Раздел позволяет обрисовать конкретную ситуацию или проблему и кратко изложить возможные альтернативы.

Если необходимо подробно задокументировать анализ каждого альтернативного варианта, то в ADR можно добавить дополнительный раздел "Альтернативы".

##### Решение <a name="9efd9a51"></a>

Содержит архитектурное решение и его полное обоснование.

Позволяет архитектору больше уделить внимания ответу на вопрос "почему", нежели на вопрос "как". Понимание причины принятия решения гораздо важнее, чем понимаение, как именно что-то работает.

Знание причин принятия решения и его обоснования помогает глубже понять контекст задачи и избежать возможных ошибок при рефакторинге под другое решение, способное стать источником проблем.

##### Последствия <a name="4119fa6c"></a>

Документация общего воздействия архитектурного решения.

Положительный момент присутствия данного раздела - документирование анализа компромиссов, связанных с архитектурным решением.

##### Комплаенс <a name="4039886c"></a>

Раздел заставляет архитектора задуматься, как оценивать и управлять архитектурным решением для проверки соблюдения его требований.

##### Примечание <a name="a0c7431c"></a>

Различные метаданные, касающиеся ADR-записи:
- Исходный автор
- Дата утверждения
- Кем утверждено
- Дата замены
- Дата последней корректировки
- Кем скорректировано
- Последняя корректировка

## Глава 20. Анализ архитектурных рисков с.346 <a name="ea45b6a6"></a>

### Матрица рисков c.346 <a name="49d0ac0b"></a>

Предназначена для объективного определения степени риска в конкретной области архитектуры.

В матрице архитектурных рисков используются два измерения: общее влияние риска и вероятность его возникновения. У каждого измерения имеются соответствующие оценки: низкая (1), средняя (2) и высокая (3). Эти числа перемножаются в каждом элементе матрицы, давая объективный числовой показатель степени риска.

- 1, 2 - низкий риск
- 3, 4 - средний риск
- 6, 9 - высокий риск

<div>
<table>
    <tbody>
        <tr>
            <td rowspan="2" colspan="2">
                &nbsp;
            </td>
            <td colspan="3">
                Оценка вероятности возникновения риска
            </td>
        </tr>
        <tr>
            <td>
                Низкая (1)
            </td>
            <td>
                Средняя (2)
            </td>
            <td>
                Высокая (3)
            </td>
        </tr>
        <tr>
            <td rowspan="3">
                Общее влияние риска
            </td>
            <td>
                Низкая (1)
            </td>
            <td>
                1
            </td>
            <td>
                2
            </td>
            <td>
                3
            </td>
        </tr>
        <tr>
            <td>
                Средняя (2)
            </td>
            <td>
                2
            </td>
            <td>
                4
            </td>
            <td>
                6
            </td>
        </tr>
        <tr>
            <td>
                Высокая (3)
            </td>
            <td>
                3
            </td>
            <td>
                6
            </td>
            <td>
                9
            </td>
        </tr>
    </tbody>
</table>
</div>


> При использовании матрицы рисков в первую очередь учитывайте общее влияние, а вероятность возникновения - во вторую.

### Оценка рисков с.347 <a name="0acd5af5"></a>

Оценка рисков - сводный отчёт по общему риску архитектуры с учётом контекстных и значимых оценочных критериев.

### Проведение риск-штурма с.351 <a name="acebb4af"></a>

Риск-штурм - это совместная работа по выявлению архитектурного риска в конкретном направлении.

Три основных этапа:
1. Выявление (индивидуально)
2. Консенсус (совместно)
3. Снижение (совместно)

## Глава 21. Составление диаграмм и проведение презентаций архитектуры с.367 <a name="9848c0b7"></a>

_Репрезентативная согласованность_ - принцип, согласно которому всегда следует показывать взаимосвязь между частями архитектуры (либо на диаграммах, либо в виде презентации).

### Стандарты составления диаграмм <a name="c73b1f18"></a>

**UML**

**С4**

Context (Контекст) - весь контекст системы, включая роли пользователей и внешние зависимости.

Container (Контейнер) - физические/логические границы развёртывания и контейнеры внутри архитектуры.

Component (Компонент) - представление системы с позиции компонентов; оно наиболее точно соответствует взгляду архитектора системы.

Class (Класс) - тот же стиль, что и в UML.

**ArchiMate**

### Рекомендации по составлению диаграмм с.372 <a name="d3479975"></a>

**Заголовки**

Все элементы должны иметь заголовки или хорошо известны целевой аудитории.

**Линии**

Сплошные линии указывают на синхронный, а пунктирные на асинхронный обмен.

**Фигуры**

**Надписи (метки)**

**Цвет**

**Разъяснения**

## Глава 22. Эффективная команда с.380 <a name="c8a60de6"></a>

Способность добиться от команд высокой эффективности - одно из отличий результативного и успешного архитектора ПО.

### Рамки, устанавливаемые для команд <a name="88245d50"></a>

Грамотный архитектор стремится осуществлять правильный уровень руководства и установить разумные рамки, чтобы в распоряжении команды были необходимые инструменты и соответствующие бибилиотеки для продуктивной реализации архитектуры.

### Личные качества архитекторов с.381 <a name="1fe7bd81"></a>

Три типа архитекторов:
- Диктатор
- Кабинетный
- Эффективный

### Насколько жёстким должен быть контроль? <a name="4dd7f9b3"></a>

Пять основных факторов:
1. Слаженность команды
2. Численность команды
3. Совокупный опыт
4. Сложность проекта
5. Продолжительность разработки проекта

Фиксированная шкала составляет 20 баллов для каждого фактора.

_Отрицательные значения_ - кабинетный архитектор (с меньшей степенью контроля вовлечённости).

_Положительные значения_ - роль диктатора (с большей степенью контроля и участия).

> Шкала степени контроля
> 
> Диктатор |+100|----|+80|----|+60|----|+40|----|+20|----|0|----|-20|----|-40|----|-60|----|-80|----|-100| Кабинетный архитектор

**Пример сценария**

| Фактор                               | Значение               | Оценка | Роль, исполняемая архитектором |
|--------------------------------------|------------------------|--------|--------------------------------|
| Слаженность команды                  | Новички в команде      | +20    | Диктатор                       |
| Численность команды                  | Небольшая (4 человека) | -20    | Кабинетный                     |
| Совокупный опыт                      | Все опытные            | -20    | Кабинетный                     |
| Сложность проекта                    | Относительно простой   | -20    | Кабинетный                     |
| Продолжительность разработки проекта | 2 месяца               | -20    | Кабинетный                     |
| Общий балл                           |                        | -60    | Кабинетный                     |

### Тревожные признаки в работе команды с.391 <a name="21fa9f10"></a>

Три фактора:
1. Замедление процесса (Закон Брукса. Чем больше людей привлечено к проекту, тем дольше он будет разрабатываться)
2. Плюралистическое невежество (Суть - все вместе соглашаются с нормой (но в тайне её отвергают), поскольку полагают, что не замечают чего-то очевидного)
3. Размытость ответственности (Рост численности команды негативно сказывается на на общении)

### Чек-листы <a name="902fc5e4"></a>

- В чек-листе не должно быть никаких процессов, имеющих процедурный поток зависимых задач
- Не следует включать простые, хорошо известные процессы, выполняемые часто и без ошибок

Подходящие кандадты:
- Процессы, не имеющие какого-либо процедурного порядка или зависимых задач
- Процессы, в которых могут быть допущены ошибки или пропущены какие-то действия

Три ключеых чек-листа
- Чек-лист завершения разработки кода
- Чек-лист модульного или функционального тестирования
- Чек-лист релиза ПО

### Категории сторонней библиотеки с.402 <a name="e7059d8e"></a>

_Специальное назначение_

Специализированные библиотеки для решения задач, не требующих написания собственного кода.

Примеры:
- формирование PDF
- считывание штрих кодов

_Общее назначение_

Библиотеки помещённые в надстройку API-интерфейса языка и включающие в себя такие функциональные средства, как Apache Commons и Guava для Java.

_Среда разработки_

Бибилиотеки составлющие целый уровень или структуру приложения и являются глубоко встраиваемыми в код.

Примеры:
- Hibernate
- Spring

## Глава 23. Навыки лидерства и ведения переговоров с.404 <a name="03aa1b8d"></a>

### Ведение переговоров с бизнес партнёрами с.405 <a name="8fa81edc"></a>

> Чтобы лучше понять ситуацию, обращайте внимание на "громкие слова" и грамматические конструкции в речи оппонента.

> Прежде чем вступить в переговоры, нужно собрать как можно больше информации.

> Когда отвергаются всё остальные аргументы, излагайте свою позицию в понятиях затрат финансов и времени.

> Чтобы уточнить требования, используйте правило "разделяй и влавствуй".

#### Девятки доступности с.406 <a name="231db626"></a>

| Время работы в процентах | Простои в год (в день)     |
|--------------------------|----------------------------|
| 90.0% (одна девятка)     | 36 дней 12 часов (2.4 ч)   |
| 99.0% (две девятки)      | 87 часов 46 минут (14 мин) |
| 99.9% (три девятки)      | 8 часов 46 минут (86 с)    |
| 99.99% (четыре девятки)  | 52 минуты 33 секунды (7 с) |
| 99.999% (пять девяток)   | 5 минут 35 секунд (1 с)    |
| 99.9999% (шесть девяток) | 31.5 секунды (86 мс)       |

### Переговоры с другими архитекторами с.407 <a name="943f6558"></a>

> Всегда помните, что наглядный пример лучше спора.

> Избегайте острых споров и не переходите на личности - переговоры выигрываются за счёт спокойного лидерства в сочетании с ясными и краткими рассуждениями.

### Переговоры с разработчиками c.409 <a name="66619c75"></a>

> Убеждая разработчиков принять то или иное архитектурное решение или выполнить конкретную задачу, предоставьте обоснование, а не "указывайте сверху".

> Если разработчик не согласен с решением, нужно позволить ему прийти к решению самостоятельно.

### Архитектор ПО в роли лидера <a name="adf01ae3"></a>

#### Четыре "С" архитектуры с.411 <a name="e5911376"></a>

> Разработчиков/архитекторов притягивают сложности, как мотыльков огонь, и зачастую результат один и тот же.

Эффективным способом избежать несущественной сложности (мы сами сделали проблему большой) является применение к архитектуре так называемых четыре "С":
- communication (общение)
- collaboration (сотрудничество)
- clarity (ясность)
- conciseness (лаконичность)

#### Будьте прагматичны, но дальновидны с.413 <a name="21d7da02"></a>

Дальновидность - размышления о будущем или перспективное планирование на основе богатого воображения или мудрости.

Дальновидность означает использование стратегического мышления для решения проблем.

Прагматизм - разумное и реалиститчное решение задач на основе практических, а не теоретических соображений.

Прагматичность при создании архитектурного решения - это принимать во внимание все следующие факторы и ограничения:

- бюджетные ограничения и другие факторы, связанные с финансовыми затратами;
- ограничения по времени и другие факторы, связанные с затратми времени;
- набор и уровень навыков команды разработчиков;
- компромиссы и последствия, связанные с архитектурным решением;
- технические ограничения предлагаемого архитектурного проекта или решения.

Сохранение баланса между прагматизмом и дальновидностью - прекрасный способ завоевать авторитет в качестве архитектора.

#### Лидерство на основе личного примера <a name="c65512b6"></a>

### Взаимодействие с командой разработчиков <a name="e7b24ff5"></a>

Архитектор может участвовать в совещаниях двух видов:
- навязанных (на которые он приглашен)
- назначаемых (которые он созывает сам)

> Предварительный запрос повестки дня совещания помогает определить, нужно оно вам или нет.

> Самая главная формула успеха - знание, как обращаться с людьми. _Теодор Рузвельт_

## Глава 24. Карьерный путь с.424 <a name="bcc45ce7"></a>

### Правило 20 минут <a name="b8213328"></a>

Суть правила - уделять изучению нового материала или определённой темы не менее 20 минут в день.

Рекомендуется применять правило по утрам, в самом начале рабочего дня.

### Разработка персонального радара <a name="3d3390c4"></a>

Радар состоит из четырёх квадрантов, на которые разделяется сфера разработки программного обеспечения:

- Инструменты
- Языки и фреймворки
- Технические приёмы
- Платформы

**Кольца**

- Hold (Отложить)
- Assess (Оценить)
- Trial (Опробовать)
- Adopt (Принять)


### Напутствия <a name="df4181c4"></a>

> В архитектуре нет верных или неверных ответов, есть только _компромиссы_.

[oas_mnogourovnevaya_arhitektura]: https://www.plantuml.com/plantuml/svg/VPDFIm9H5CNtxrCyQ5DBMxIG2h-Aa8j0MkJiAl0FPP6aRiF-u3uOHwT6JVqAvtwZpW595sy6uN7VFRzxptrtiDA8gjTHergFN7GPrMiU8womnXHhwrYJKS9xoZEslkVHj7jarcPgOMqXYFqXVWcgR2cD4U4ZvsuEt9d7850ZDlNMGi9WRYsAZFoj9_z9Riv4HchgC6QmyVB13oQyfCndrYTCBMLhNRkCMbXGdZkyRYTXyhyrDRu1Arxv9XQN79tKCx4X9spRCmIaUekgh4Vej7nyKYsLpnq6c57TQ2xIdLpk2udSxSKUa6ah_8MuTtPQo5-BbWujeikQ9CYFgC_ekxHUNaTCx4dxyMmQK-RAzAmzQ1SKHmuV-lR8j1uPRpzVdlb-vHjY3Zh4Tv0CbemG4toaHOn9uNwtWodFatnnwv3P6AdA2srsVdUkKhkwqF_Z3m00

[oas_konvejernaya_arhitektura]: https://www.plantuml.com/plantuml/svg/ZLEzJW916EptAJQnqH8B2wA6Lo6HmeHOo7LgSd1HD121rk1Fw4sMbTK3F7Y5-Tx8-U9fjJajs7oxypF3RgxHIPhdIQVPJanochHR5W_Oe817m191KivEHfPBAjV8fKTW9Jt923cxYq-byxTMx9kyPyp5ZZco64SqoWrMkl0Sbj8boCbUMl9VD9G7ELbl1ZCEMwiv-C2Scu22RYEIYGLQwxRFgOiLuQNHybYNXp_Mn3mj2cuty1JN39FKqyj4KlOQG0b1_ukgP4ZIONt_e5ch7_yE1cCiIDjgGSgok82yLut5Mkxb1Zcd0aM45qjuelTAgv6VgG9wHtsw-6ZIbFX2CcOD_v-1kTpfPLh6E0fIw3g8ogedWsUgDyZrBhLA-TP_rp5uX6Fr2TwZpAXa2aVYBICSvfLlK1RJSwxanwohmsO8Ae_4L5xlbJMDrjc9Vb1V

[oas_mikroyadernaya_arhitektura]: https://www.plantuml.com/plantuml/svg/bPEzJW9158NxUOf9RBJ4meAeuLL8f30X5hATci1k50r4e3Nu4tgJPTtHMPJb5Svz8y-TmfYusM0pkTpx7SwPdstrelPvr6jt8nETHjsEnHmUA-cZb0boE5Phf3AnNFfo3Iyn785O4evIkuilb4HAV8PPWFUCkTWnHnRJ2esopie06Oj21XooifUM_0kvWWrFwirWmM9ZrGSVMFA7Oz_BX32UsNR8QU_KLaOeBBnLAregDcGrm8gomk0X90pD7qlECgJKnXnc_DE6OGBrocJ6vB6C0k1qZwgICQ73vlv1kz4y_biOJ96Jt-WEg4-gbUHUaMaUkPSR-71-woqTdYJ6IZEIJrGH3d48ZwpIQSvvBWcznjjxO2btUjgMDYa5_R2EAcNrbGdtLCBheMeKXCVmhpYFIBc56TwtL5ZTTKhmbbOfblLt4GA6FbVolsQrgHRwaEelkaftPKshStQYNzmt

[oas_arhitektura_na_osnove_servisov]: https://www.plantuml.com/plantuml/svg/bLDFIm917BtFfnZeKiSwT90AlugGXq0wvDugM4VCGaczXbbu3zRLgLNRzIkytpVg_HOfYCZTWpFFuVrvynkjDeFQLT2iDG8JN0IDkiLGGkaW4GUFbJXfIuZ88jKbanP1XXZU4de92HCY7jbz9H9lk7ii-5dBY7GgPN1WpFMUEVtRNYrpmvXWAIrnYkoD9V-Ll2KF4hBc1bE2ZTKaV636BnuftGOausKR_0bFGIezB0sUQBaceml_ROmLjuWCfyLLEX5dYHTvbJafX5nI5P5D2-bpJwHZs4YpOndn9euXQkKPcgc_z6btKZawhXrMplu11aCiADperMZKtcLXyCOaBV8eTqY8EDb2cKPln_9iJNvR5VcOktI9oxOUwvJOLkUHbXLFC9C7VJFBAX6LORxsYkhrWJFgENsjiVqL5QzYy8o8zKTuBrz-Z8Y2Ut6qc1Lxiz_LbScL3ZlOKtZbbapvCRYrfbg_FDU_zHS0

[oas_arhitektura_upravlyaemaya_sobytiyami]: https://www.plantuml.com/plantuml/svg/fPFFIW9H6CNtzoakj2beKuiMKk6h2Ba8f4NEhWATmIoKr6tq9ze7C-DC-QVHLpZV6tKE60I5QI4CtzpldD_tvuxbUb0v3UgLMk22uw1MzUXRmreOMOWS4mijiWRYRMyHvegGOcezvjuHMyzR4pCarh6GbXuFHtvJCfvJJbc6d8O12lves7BkRCCT_5oc82iNCcKmjYQJZFovf_w9kh6gK3LqU6Omzwg4DoHyoNdE3YXcBYTQhsr6JKoO7ZlS4ZhzF5oWcKk9A2naCfNvmKBFE5Cp64gIwL4iI4HOLqHhEVQawgaDE4je7Q6q6Cp4jovn-wNTlSfEwV1xuD17HlrSCz4VhU5yOIKrScEN637YRfSxbx0uBoQQWuH836ZrRNBJFpFlj42BjAfrEsD3IEnQ5-hPKqnd0tfsVjd98tKpsdWVghxuijZ1FtPpZvXp3F2w8aEJnzHTMKXdilgzBfzANZx9_E9t-ioLMQsAk_2kN3qvqZ_z0m00

[oas_arhitektura_na_osnove_prostranstva]: http://www.plantuml.com/plantuml/svg/fLFDIiD04BxlKonuqQCUF1ILlah17eJYmUQcGfjGgrXiUnL_nBlGfbbDsgPzXPatyllI5GI3H3mqJBBVptmpstexQ9m5xKOhCC59q6fQ6Mb7Uv9gA4xc6cga7PbOoVbOQHV5Ic9nLjOum0T0092SbSH0RVCTG9uxIV1Rw1WqAEXmnvZpBNDORWDf28CQeyYyuCfUME1VWClm8GLgPkGLnTeMpXyonOkJ76f3WENP6o_5WP3hhMHMKaihM1BMHzMLEMYPaNkOBRu-UakSnKMea6af-gGXyaELJSu8IVZ8lH8aT415xHdqogvY7IDZ27jAELdwQGqWTr3Rss_irev-5aP6aW2_PbRmeyhCCgqtUBErExsI51MsKB4Bv9KvSm0VaL6if0-LkAB20yUb4GTJtLMcUiDjMXXFDbUB8ooZ6IuQ7YbdJIz_cwhxbMa-8dEYOtd_gmO3Jq2urX0IqtylpyVRZ9wQt_Yy_uudlxgOIslgpTDZ_hi_0G00

[oas_orkestrirovannaya_servis_orientirovannaya_arhitektura]: https://www.plantuml.com/plantuml/svg/bLF1Ji9G4BplLxp4YnuyuC43KSElaCZ1X7YGtjI4jb4q4e6hGJJUJHwLAXGBlp3xHywcqGH5mPZMBJCxCsyebKPGFGaQrNeWmL5GhpaCj8aCgOOQSHhpcY61Hyu_hnsd8S4c4aBXDcR6GOfSeoLStffwGI0Y9QDWJ8ftctQdpfp_KunuJRNtkRGbSheX-mxT9Riv3LABa72OM4QRt9aZ_v6yYSKWwqNmn67kp0bl61OXgTOXcLXAQNjiSGgH4Pu8xYWwBJxyaaPMd8YFF1kNIq8dqqoqnuIHtXY1wkyimqfhaxHNtjcjbie7WYv6HET5FHh_mliv29xDdytSwYN6dDZFKeS1jJDBH3Gs75PDYpl9cavzRemqfbSR-Pex0mprsbfrDFPSOD5MnaAq1tiZI69PPb5ycQjj1FVmJDJ3wofY7vxm5NKzXl-i-7lGeZkJMZY4lIn4_XINSoULsl6X_P0-0000

[oas_arhitektura_mikroservisov]: https://www.plantuml.com/plantuml/svg/fPDFIq915CNtyoa6sjIo5YsamgyYv2AG5lbs5UWyoY99tKP_mdtmV3OrFftdLpZt6tKkI1X4eIvaBkCzltFkNAqsazfPqgmr4fES98swHLzQSeKW3Xw5E4cbXSnYXe22PIbjU9uv0giIkTtM1jPpdXxl_4nbW8Z8szwECUTRvl1tRAJUMqfp5XDfYzFANbZslyBpoY4WOcmmP36tweHFZ13W4KdhiHal2-CPF0LHxZ0nU21ooeuE_3SO1O-C7Kw3g_HPd4L9hKOPQqkmnAlKmnkcKBzS1apl25Qvfr6fJEaISL3Psw_jLex-A0pwTCWmrt48IbT7BB7Ua6i-kPTh15OHSMqMnqUX8vAGAWEwXmu2ybL7VDHdb9J1kfi4maXkTRkMcJ9nkd1z-2MGqNtJBEXYr7Jne_hNsE096JCEy86u-dWP1JTqoZ3QU8kB6LIBKfa_vXl2wpVhkfXBQwhrqsFzKty1

[oas_compare]: https://www.plantuml.com/plantuml/svg/pLVDRXCn4BxxAInn0GaEvS2X0jHNgKGFI1K7cXj5IZOA1QKYwHK5ADoHDajCdJJPlC8tRyItiuuK2IlKjAlbi94xFz_ucnbxt8EJpk7hpidXSSTqNdQEZoo-IHSv2gpW-7auYrowCe2NZAA5PDANhZ5lxfbd5kC_LVGgwIKz55pCfKSbL_RKqdwYsfyerR8CSGg664NZ8BVtCNbGEtz2IVE2sZcS1hgHsmIUSaQJ4MOfZkEellAs1EifbKAfAce1pnL5XBZS1V7GIX_haETh6L6tr1sf-rI6DFSKB-4LAcqtYao1P1fX5GgGRq5zeMO15snyg0HjGsQs2JqY5ctWY9H5REDP_Fk-bvkgHBDdy9twjLKALvZM6wYoGb3gd0pqpxEA1HPKptSglXB8OOObnHcP32c6jrmdEDnHW7Gaewr_7Mmt1uekMWZ9g2pekhVriSQPfNosEN2MI_wiGZ32oNaLL0ODMyTt0synLL8Epk1Iorp81Pibaw4ISrY6FZudnDFznqyEz_QVRoyZiWJbNK6S9eOo66E67ElwF4d_1aoRujyibi4F5DeE7-KTl5xVgpZJz9ZjCKzD0fiV2srmZhsAlCx5CtWKjojxIxLEwFH9TUYbhnT2yvLlxV0dz0Acyg5-LbqXhsSqVuTHeDshvZqQIr-q0OoElXA-cWGwBFJH4E-Tb10jtXh_l5U3pyWnamlyYfDldd7p46atISual9SCEQRfSxFTcZS06avBFKxuvVy_XuGI6NqVz-8lfFPx_xPpshmr1qUlNbJ_T_y6